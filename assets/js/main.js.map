{"version":3,"sources":["utilities.js","libraries.js","main.js"],"names":["utils","notif","message","type","arguments","length","undefined","settings","options","$","notifyClose","icon","notify","_objectSpread","getSlug","text","toLowerCase","replace","dbg","a","c","DEV","console","info","concat","log","prop","split","tooltip","selector","html","fn","notifyDefaults","placement","from","animate","enter","exit","document","addEventListener","ELM","body","getElementsByTagName","search","getElementById","result_loading","result_summary","result_table","result_table_body","mfd","markInstance","Mark","request","XMLHttpRequest","open","onload","res","this","response","status","startsWith","i","j","k","forEach","_a$split2","_slicedToArray","full_id","name","push","id","parent_id","name_lc","lv","ch","substr","kota","className","focus","innerHTML","setTimeout","onerror","send","e","which","value","keyword","keys","_toConsumableArray","Set","trim","filter","findById","test","tree","extend","counter","pr","kb","kc","ds","every","join","display","b","key","includes","match","getTr","_ref","d","classList","contains","blur","style","add","slideDown","target","remove","outerHTML","map","toggle"],"mappings":"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","file":"main.js","sourcesContent":["const utils = (function () {\r\n\r\n\tconst notif = (message, type = 'info', close = false, settings, options) => {\r\n\t\tif (close) $.notifyClose();\r\n\t\tlet icon = 'icon-info';\r\n\t\tif (type === 'wait') { icon = 'icon-hourglass'; type = 'info'; }\r\n\t\tif (type === 'success') { icon = 'icon-check'; }\r\n\t\tif (type === 'danger' || type === 'warning') { icon = 'icon-exclamation'; }\r\n\t\t$.notify({ message, icon, ...options }, { type, ...settings });\r\n\t}\r\n\r\n\tconst getSlug = text => text.toLowerCase().replace(/[^\\w ]+/g, '').replace(/ +/g, '-');\r\n\r\n\treturn {\r\n\t\tnotif,\r\n\t\tgetSlug,\r\n\t}\r\n\r\n})();\r\n\r\n\r\n\r\nconst dbg = (a = '!', c = 0) => {\r\n\tif (typeof DEV !== 'undefined') {\r\n\t\tif (DEV) console.info('%c' + a, `color: ${typeof c === 'number' ? ['#00ff7f', '#6495ed', '#ff0', '#fa8072', '#ffa500', '#f00'][c] : c}`);\r\n\t}\r\n}\r\n\r\n\r\n\r\n$(() => {\r\n\r\n\tconsole.log('© Muhammad Afifudin, 2020');\r\n\tconsole.log('%cVersion: ' + $('script[src*=\"assets/js\"]').prop('src').split('?v=')[1], 'color: #6495ed');\r\n\r\n\t$('body').tooltip({ selector: '[data-toggle=\"tooltip\"]', html: true });\r\n\r\n});\r\n","if ($.fn.notifyDefaults) {\r\n\t$.notifyDefaults({\r\n\t\tplacement: { from: 'bottom' },\r\n\t\tanimate: { enter: 'animated fadeInUp', exit: 'animated fadeOutDown' },\r\n\t});\r\n}\r\n","document.addEventListener('DOMContentLoaded', function () {\r\n\r\n\tconst ELM = {\r\n\t\tbody: document.getElementsByTagName('body')[0],\r\n\t\tsearch: document.getElementById('search'),\r\n\t\tresult_loading: document.getElementById('result-loading'),\r\n\t\tresult_summary: document.getElementById('result-summary'),\r\n\t\tresult_table: document.getElementById('result-table'),\r\n\t\tresult_table_body: document.getElementById('result-table-body'),\r\n\t}\r\n\r\n\tvar mfd = [],\r\n\t\tsetting = {\r\n\t\t\tlevel: [0, 1, 2, 3],\r\n\t\t\tprov: null,\r\n\t\t},\r\n\t\tmarkInstance = new Mark(ELM.result_table_body);\r\n\r\n\t{\r\n\t\tlet request = new XMLHttpRequest();\r\n\t\trequest.open('GET', 'assets/csv/mfd.csv', true);\r\n\t\trequest.onload = function () {\r\n\t\t\tlet { response: res, status } = this;\r\n\t\t\tif (status >= 200 && status < 400 && res.startsWith('11,')) {\r\n\r\n\t\t\t\tlet i = -1, j = -1, k = -1;\r\n\t\t\t\tres.split('\\n').forEach(a => {\r\n\t\t\t\t\tlet [full_id, name] = a.split(','),\r\n\t\t\t\t\t\tid = '',\r\n\t\t\t\t\t\tparent_id = '';\r\n\r\n\t\t\t\t\tif (full_id.length === 2) { // Provinsi\r\n\t\t\t\t\t\tmfd.push({ id: full_id, parent_id: 0, full_id, name: name.replace('Dki J', 'DKI J').replace('Di Y', 'DI Y'), name_lc: name.toLowerCase(), lv: 0, ch: [] });\r\n\t\t\t\t\t\ti++; j = -1; k = -1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (full_id.length === 4) { // Kabupaten/kota\r\n\t\t\t\t\t\tlet id = full_id.substr(2, 2);\r\n\t\t\t\t\t\tmfd[i].ch.push({ kota: id > 70, id, parent_id: full_id.substr(0, 2), full_id, name, name_lc: name.toLowerCase(), lv: 1, ch: [] });\r\n\t\t\t\t\t\tj++; k = -1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (full_id.length === 7) { // Kecamatan\r\n\t\t\t\t\t\tmfd[i].ch[j].ch.push({ id: full_id.substr(4, 3), parent_id: full_id.substr(0, 4), full_id, name, name_lc: name.toLowerCase(), lv: 2, ch: [] });\r\n\t\t\t\t\t\tk++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (full_id.length === 10) { // Desa/Keluarahan\r\n\t\t\t\t\t\tlet id = full_id.substr(2, 2);\r\n\t\t\t\t\t\tmfd[i].ch[j].ch[k].ch.push({ kota: id > 70, id: full_id.substr(7, 3), parent_id: full_id.substr(0, 7), full_id, name, name_lc: name.toLowerCase(), lv: 3 });\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t\tconsole.info(mfd);\r\n\t\t\t\tdocument.getElementById('loading').style.display = 'none';\r\n\t\t\t\tdocument.getElementById('search-form-wrapper-outer').className = 'search-form-wrapper-outer animated animated-1s bounceIn';\r\n\t\t\t\tdocument.getElementById('explore-wrapper').className = 'explore-wrapper animated animated-1s bounceInUp';\r\n\t\t\t\tELM.search.focus();\r\n\r\n\t\t\t} else {\r\n\t\t\t\tdocument.getElementById('loading').innerHTML = '<div class=\"animated animated-1s swing delay-1s\"><i class=\"icon-exclamation mr-35\"></i>Terjadi kesalahan :(</div>';\r\n\t\t\t\tsetTimeout(() => { document.getElementsByTagName('header')[0].className = 'bg-danger-gradient pb-6'; }, 1000);\r\n\t\t\t}\r\n\t\t};\r\n\t\trequest.onerror = function () {\r\n\t\t\tdocument.getElementById('loading').innerHTML = '<div class=\"animated animated-1s swing delay-1s\"><i class=\"icon-exclamation mr-35\"></i>Terjadi kesalahan :(</div>';\r\n\t\t\tsetTimeout(() => { document.getElementsByTagName('header')[0].className = 'bg-danger-gradient pb-6'; }, 1000);\r\n\t\t};\r\n\t\trequest.send();\r\n\t}\r\n\r\n\t// Search\r\n\tELM.search.addEventListener('keypress', function (e) { if (e.which === 13) search(ELM.search.value); }, false);\r\n\tdocument.getElementById('search-btn').addEventListener('click', function () { search(ELM.search.value); }, false);\r\n\tconst search = keyword => {\r\n\r\n\t\tlet keys = [...new Set(keyword.trim().toLowerCase().split(/[\\s,]+/))].filter(a => a.length),\r\n\t\t\tfindById = keys.length === 1 && /^\\d{2,10}$/.test(keys[0]);\r\n\t\tdbg('Search: ' + keyword);\r\n\t\tconsole.info(keys);\r\n\r\n\t\tif (keys.filter(a => a.length > 2).length || keys.filter(a => a.length > 1).length > 1 || keys.length > 3 || findById) {\r\n\t\t\tdbg('Good keyword :)', 1);\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tlet tree = $.extend(true, [], mfd),\r\n\t\t\t\t\tcounter = { pr: 0, kb: 0, kc: 0, ds: 0 };\r\n\t\t\t\tif (keys.length > 1 && keys.every(a => /^\\d{2,7}$/.test(a))) {\r\n\t\t\t\t\tkeys = [keys.join('')];\r\n\t\t\t\t\tfindById = true;\r\n\t\t\t\t}\r\n\t\t\t\ttree.forEach(a => {\r\n\t\t\t\t\tif (findById && a.full_id == keys[0]) { a.display = 1; a.ch.forEach(b => b.display = 0); counter.pr++; }\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif (keys.every(key => a.name_lc.includes(key))) { a.display = 0; a.match = 1; counter.pr++; }\r\n\t\t\t\t\t\ta.ch.forEach(b => {\r\n\t\t\t\t\t\t\tif (findById && b.full_id == keys[0]) { a.display = 1; b.display = 1; b.ch.forEach(c => c.display = 0); counter.kb++; }\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tif (keys.every(key => b.name_lc.includes(key))) { a.display = 1; b.display = 0; b.match = 1; counter.kb++; }\r\n\t\t\t\t\t\t\t\tb.ch.forEach(c => {\r\n\t\t\t\t\t\t\t\t\tif (findById && c.full_id == keys[0]) { a.display = 1; b.display = 1; c.display = 1; c.ch.forEach(d => d.display = 0); counter.kc++; }\r\n\t\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\t\tif (keys.every(key => c.name_lc.includes(key))) { a.display = 1; b.display = 1; c.display = 0; c.match = 1; counter.kc++; }\r\n\t\t\t\t\t\t\t\t\t\tc.ch.forEach(d => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (findById && d.full_id == keys[0]) { a.display = 1; b.display = 1; c.display = 1; d.display = 0; counter.ds++; }\r\n\t\t\t\t\t\t\t\t\t\t\telse if (keys.every(key => d.name_lc.includes(key))) { a.display = 1; b.display = 1; c.display = 1; d.display = 0; d.match = 1; counter.ds++; };\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tlet html = '';\r\n\t\t\t\tconst getTr = ({ display, full_id, parent_id, id, name, lv, kota, match }) => {\r\n\t\t\t\t\tif (display === 0) return `<tr${kota ? ' data-kota=\"1\"' : ''} class=\"lv-${lv}\" data-fid=\"${full_id}\" data-parent=\"${parent_id}\"><td>${parent_id}<b>${id}</b></td><td>${name}</td></tr$>`;\r\n\t\t\t\t\tif (display === 1) return `<tr${kota ? ' data-kota=\"1\"' : ''} class=\"lv-${lv} toggle toggle-expanded${match ? '' : ' unmark'}\" data-fid=\"${full_id}\" data-parent=\"${parent_id}\"><td>${parent_id}<b>${id}</b></td><td>${name}</td></tr$>`;\r\n\t\t\t\t\treturn ``;\r\n\t\t\t\t}\r\n\t\t\t\ttree.forEach(a => {\r\n\t\t\t\t\thtml += getTr(a);\r\n\t\t\t\t\ta.ch.forEach(b => {\r\n\t\t\t\t\t\thtml += getTr(b);\r\n\t\t\t\t\t\tb.ch.forEach(c => {\r\n\t\t\t\t\t\t\thtml += getTr(c);\r\n\t\t\t\t\t\t\tc.ch.forEach(d => {\r\n\t\t\t\t\t\t\t\thtml += getTr(d);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\tconst b = text => `<b class=\"fw-6\">${text}</b>`;\r\n\t\t\t\tlet { pr, kb, kc, ds } = counter;\r\n\t\t\t\tif (pr + kb + kc + ds) {\r\n\t\t\t\t\tELM.result_summary.innerHTML = findById ?\r\n\t\t\t\t\t\t`<div>Menampilkan hasil pencarian wilayah dengan kode ${b(keyword)}</div>` :\r\n\t\t\t\t\t\t`<div class=\"text-success\">Menemukan ${b(pr)} provinsi, ${b(kb)} kabupaten/kota, ${b(kc)} kecamatan, dan ${b(ds)} desa/kelurahan.</div>`;\r\n\t\t\t\t\tELM.result_table_body.innerHTML = html;\r\n\t\t\t\t\tELM.result_table.style.display = '';\r\n\t\t\t\t\tif (!findById) keys.forEach(a => markInstance.mark(a));\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tELM.result_summary.innerHTML = `<div class=\"text-danger\">Tidak ada hasil untuk pencarian ${b(keyword)}</div>`;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tELM.result_loading.style.display = 'none';\r\n\t\t\t\tELM.result_summary.style.display = '';\r\n\r\n\t\t\t}, ELM.body.classList.contains('search-active') ? 200 : 600);\r\n\r\n\t\t\tELM.search.blur();\r\n\t\t\tELM.result_table.style.display = 'none';\r\n\t\t\tELM.result_summary.style.display = 'none';\r\n\t\t\tELM.result_loading.style.display = '';\r\n\t\t\tELM.body.classList.add('search-active');\r\n\t\t\t$('#result').slideDown();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdbg('Bad keyword :(', 1);\r\n\t\t\t//\r\n\t\t\t// TODO: Error message\r\n\t\t\t//\r\n\t\t}\r\n\t}\r\n\r\n\t// Explore\r\n\tdocument.getElementById('explore-btn').addEventListener('click', function () {\r\n\t\tELM.search.value = '';\r\n\t\tELM.result_summary.style.display = 'none';\r\n\t\tELM.result_table.style.display = 'none';\r\n\t\tELM.result_loading.style.display = '';\r\n\t\tsetTimeout(() => {\r\n\t\t\tELM.result_table_body.innerHTML = mfd.map((a, i) => `<tr class=\"lv-0 toggle toggle-explore\" data-i=\"${i}\" data-j=\"\" data-k=\"\" data-fid=\"${a.full_id}\"><td><b>${a.id}</b></td><td>${a.name}</td></tr>`).join('');\r\n\t\t\tELM.result_loading.style.display = 'none';\r\n\t\t\tELM.result_table.style.display = '';\r\n\t\t}, ELM.body.classList.contains('search-active') ? 200 : 600);\r\n\t\tELM.body.classList.add('search-active');\r\n\t\t$('#result').slideDown();\r\n\t}, false);\r\n\r\n\t// Toggle\r\n\tELM.result_table_body.addEventListener('click', function (e) {\r\n\t\tfor (var target = e.target; target && target != this; target = target.parentNode) {\r\n\t\t\tif (target.matches('tr')) {\r\n\t\t\t\tlet d = target.dataset;\r\n\t\t\t\tconsole.info(d);\r\n\t\t\t\tif (target.classList.contains('toggle-expanded')) document.querySelectorAll(`[data-parent^=\"${d.fid}\"]`).forEach(a => { a.classList.remove('toggle-expanded'); a.style.display = 'none'; });\r\n\t\t\t\telse if (target.classList.contains('toggle-explore')) {\r\n\t\t\t\t\ttarget.classList.remove('toggle-explore');\r\n\t\t\t\t\ttarget.classList.add('toggle-expanded');\r\n\t\t\t\t\tlet ch = [];\r\n\t\t\t\t\tif (d.k.length) ch = mfd[d.i].ch[d.j].ch[d.k].ch;\r\n\t\t\t\t\telse if (d.j.length) ch = mfd[d.i].ch[d.j].ch;\r\n\t\t\t\t\telse ch = mfd[d.i].ch;\r\n\t\t\t\t\tconst getTr = ({ full_id, parent_id, id, name, lv, kota }, { i, j, k }) => `<tr${kota ? ' data-kota=\"1\"' : ''} class=\"lv-${lv}${lv === 3 ? '' : ` toggle toggle-explore\" data-i=\"${i}\" data-j=\"${j}\" data-k=\"${k}`}\" data-fid=\"${full_id}\" data-parent=\"${parent_id}\"><td>${parent_id}<b>${id}</b></td><td>${name}</td></tr$>`;\r\n\t\t\t\t\ttarget.outerHTML += ch.map((a, i) => getTr(a, d.j ? { ...d, k: i } : { ...d, j: i })).join('');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\telse document.querySelectorAll(`[data-parent=\"${d.fid}\"]`).forEach(a => { a.style.display = ''; });\r\n\t\t\t\ttarget.classList.toggle('toggle-expanded');\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}, false);\r\n\r\n});"]}