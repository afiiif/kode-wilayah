{"version":3,"sources":["utilities.js","libraries.js","main.js"],"names":["utils","notif","message","type","arguments","length","undefined","settings","options","$","notifyClose","icon","notify","_objectSpread","getSlug","text","toLowerCase","replace","dbg","a","c","DEV","console","info","concat","log","prop","split","tooltip","selector","html","fn","notifyDefaults","placement","from","animate","enter","exit","dataTable","extend","defaults","dom","language","decimal","thousands","lengthMenu","search","infoFiltered","infoEmpty","paginate","previous","next","zeroRecords","emptyTable","pageLength","$el","body","result","result_loading","result_summary","result_table","result_table_body","mfd","slided","ajax","url","success","res","startsWith","forEach","_a$split2","_slicedToArray","full_id","name","id","parent_id","substr","hide","toggleClass","focus","setTimeout","error","e","warn","status","statusText","responseText","val","click","on","this","parent","data","hasClass","removeClass","mfd_filtered","filter","toLocaleLowerCase","includes","keyword","generateResult","highlight","show","loading","level","prov","slideDown","_ref","_ref$highlight","_ref$expand","expand","getProps","lv","_ref2","_ref2$expand","_ref2$show","map","0","2","4","7","join"],"mappings":"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","file":"main.js","sourcesContent":["const utils = (function () {\r\n\r\n\tconst notif = (message, type = 'info', close = false, settings, options) => {\r\n\t\tif (close) $.notifyClose();\r\n\t\tlet icon = 'icon-info';\r\n\t\tif (type === 'wait') { icon = 'icon-hourglass'; type = 'info'; }\r\n\t\tif (type === 'success') { icon = 'icon-check'; }\r\n\t\tif (type === 'danger' || type === 'warning') { icon = 'icon-exclamation'; }\r\n\t\t$.notify({ message, icon, ...options }, { type, ...settings });\r\n\t}\r\n\r\n\tconst getSlug = text => text.toLowerCase().replace(/[^\\w ]+/g, '').replace(/ +/g, '-');\r\n\r\n\treturn {\r\n\t\tnotif,\r\n\t\tgetSlug,\r\n\t}\r\n\r\n})();\r\n\r\n\r\n\r\nconst dbg = (a = '!', c = 0) => {\r\n\tif (typeof DEV !== 'undefined') {\r\n\t\tif (DEV) console.info('%c' + a, `color: ${typeof c === 'number' ? ['#00ff7f', '#6495ed', '#ff0', '#fa8072', '#ffa500', '#f00'][c] : c}`);\r\n\t}\r\n}\r\n\r\n\r\n\r\n$(() => {\r\n\r\n\tconsole.log('Â© Muhammad Afifudin, 2020');\r\n\tconsole.log('%cVersion: ' + $('script[src*=\"assets/js\"]').prop('src').split('?v=')[1], 'color: #6495ed');\r\n\r\n\t$('body').tooltip({ selector: '[data-toggle=\"tooltip\"]', html: true });\r\n\r\n});\r\n","if ($.fn.notifyDefaults) {\r\n\t$.notifyDefaults({\r\n\t\tplacement: { from: 'bottom' },\r\n\t\tanimate: { enter: 'animated fadeInUp', exit: 'animated fadeOutDown' },\r\n\t});\r\n}\r\n\r\nif ($.fn.dataTable) {\r\n\t$.extend(true, $.fn.dataTable.defaults, {\r\n\t\tdom: \"<'row justify-content-center'<'col-sm-auto'l><'col-sm'f>>r<'table-responsive't><'row justify-content-center align-items-center'<'col-sm-auto'i><'col-sm'p>>\",\r\n\t\tlanguage: {\r\n\t\t\tdecimal: ',',\r\n\t\t\tthousands: '.',\r\n\t\t\tlengthMenu: 'Menampilkan &nbsp;_MENU_&nbsp; data',\r\n\t\t\tsearch: 'Cari',\r\n\t\t\tinfo: 'Halaman _PAGE_ dari _PAGES_',\r\n\t\t\tinfoFiltered: '',\r\n\t\t\tinfoEmpty: 'Menampilkan 0 hasil',\r\n\t\t\tpaginate: { previous: '<i class=\"fas fa-chevron-left\"></i>', next: '<i class=\"fas fa-chevron-right\"></i>' },\r\n\t\t\tzeroRecords: 'Tidak ada hasil',\r\n\t\t\temptyTable: 'Tidak ada data',\r\n\t\t},\r\n\t\tpageLength: 50,\r\n\t\tlengthMenu: [10, 25, 50, 100, 250, 500],\r\n\t});\r\n}\r\n","$(() => {\r\n\r\n\tconst $el = {\r\n\t\tbody: $('body'),\r\n\t\tsearch: $('#search'),\r\n\t\tresult: $('#result'),\r\n\t\tresult_loading: $('#result-loading'),\r\n\t\tresult_summary: $('#result-summary'),\r\n\t\tresult_table: $('#result-table'),\r\n\t\tresult_table_body: $('#result-table-body'),\r\n\t}\r\n\r\n\tvar mfd = [],\r\n\t\tslided = false,\r\n\t\tsetting = {\r\n\t\t\tlevel: [0, 1, 2, 3],\r\n\t\t\tprov: null,\r\n\t\t};\r\n\r\n\t$.ajax({\r\n\t\turl: 'assets/csv/mfd.csv',\r\n\t\tsuccess: res => {\r\n\t\t\tdbg('Response:', 2);\r\n\t\t\tconsole.info(res);\r\n\t\t\tif (res.startsWith('11,')) {\r\n\t\t\t\tres.split('\\n').forEach(a => {\r\n\t\t\t\t\tlet [full_id, name] = a.split(','),\r\n\t\t\t\t\t\tid = '',\r\n\t\t\t\t\t\tparent_id = '';\r\n\t\t\t\t\tif (full_id.length === 2) {\r\n\t\t\t\t\t\tid = full_id;\r\n\t\t\t\t\t\tparent_id = '';\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (full_id.length === 4) {\r\n\t\t\t\t\t\tid = full_id.substr(2, 2);\r\n\t\t\t\t\t\tparent_id = full_id.substr(0, 2);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (full_id.length === 7) {\r\n\t\t\t\t\t\tid = full_id.substr(4, 3);\r\n\t\t\t\t\t\tparent_id = full_id.substr(0, 4);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (full_id.length === 10) {\r\n\t\t\t\t\t\tid = full_id.substr(7, 3);\r\n\t\t\t\t\t\tparent_id = full_id.substr(0, 7);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse return false;\r\n\t\t\t\t\tmfd.push({ id, parent_id, name });\r\n\t\t\t\t});\r\n\t\t\t\tconsole.info({ mfd });\r\n\t\t\t\t$('#loading').hide();\r\n\t\t\t\t$('#search-form-wrapper-outer').toggleClass('d-none animated animated-1s bounceIn');\r\n\t\t\t\t$('#explore-wrapper').toggleClass('d-none animated animated-1s bounceInUp');\r\n\t\t\t\t$('#search').focus();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconsole.error('Invalid response :(');\r\n\t\t\t\t$('#loading').html('<div class=\"animated animated-1s swing delay-1s\"><i class=\"icon-exclamation mr-35\"></i>Terjadi kesalahan :(</div>');\r\n\t\t\t\tsetTimeout(() => { $('header').toggleClass('bg-primary-gradient bg-danger-gradient'); }, 1000);\r\n\t\t\t}\r\n\t\t},\r\n\t\terror: e => {\r\n\t\t\tconsole.warn(e.status, e.statusText);\r\n\t\t\tif (DEV) console.error({ responseText: e.responseText });\r\n\t\t\tconsole.error('Invalid response :(');\r\n\t\t\t$('#loading').html('<div class=\"animated animated-1s swing delay-1s\"><i class=\"icon-exclamation mr-35\"></i>Terjadi kesalahan :(</div>');\r\n\t\t\tsetTimeout(() => { $('header').toggleClass('bg-primary-gradient bg-danger-gradient'); }, 1000);\r\n\t\t}\r\n\t});\r\n\r\n\t{\r\n\t\t$el.search.keypress(function (e) {\r\n\t\t\tif (e.which === 13) search($el.search.val());\r\n\t\t});\r\n\r\n\t\t$('#search-btn').click(function () {\r\n\t\t\tsearch($el.search.val());\r\n\t\t});\r\n\r\n\t\t$('#explore-btn').click(function () {\r\n\t\t\tdbg('Explore...');\r\n\t\t\t$el.search.val('');\r\n\t\t\tloading();\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tgenerateResult({ mfd, expand: false });\r\n\t\t\t}, slided ? 100 : 500);\r\n\t\t});\r\n\r\n\t\t$el.result_table_body.on('click', 'td', function () {\r\n\t\t\tlet id = $(this).parent().data('id'),\r\n\t\t\t\tcollapsed = !$(this).parent().toggleClass('toggle-expanded').hasClass('toggle-expanded');\r\n\t\t\tif (collapsed) $(`[data-parent-id^=\"${id}\"]`).removeClass('toggle-expanded').hide();\r\n\t\t\telse $(`[data-parent-id=\"${id}\"]`).show();\r\n\t\t});\r\n\t}\r\n\r\n\tconst search = keyword => {\r\n\r\n\t\tdbg('Search: ' + keyword);\r\n\r\n\t\t// TODO: Sanitize keyword\r\n\t\tkeyword = keyword.toLocaleLowerCase();\r\n\r\n\r\n\r\n\t\t// TODO: Check if keyword valid\r\n\r\n\r\n\r\n\t\tif (true) { // if valid\r\n\t\t\tloading();\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tlet mfd_filtered = mfd.filter(a => a.name.toLocaleLowerCase().includes(keyword));\r\n\t\t\t\tgenerateResult({ mfd: mfd_filtered, highlight: [keyword] });\r\n\t\t\t\t// $('.lv-1,.lv-2,.lv-3').hide();\r\n\t\t\t\t$el.result_summary.html(`<div>Menemukan ... hasil</div>`).show();\r\n\t\t\t}, slided ? 100 : 500);\r\n\t\t}\r\n\t\telse { // if invalid\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tconst loading = (a = true) => {\r\n\t\tif (a) {\r\n\t\t\t$el.result_loading.show();\r\n\t\t\t$el.result_summary.hide();\r\n\t\t\t$el.result_table.hide();\r\n\t\t\t$el.body.addClass('search-active');\r\n\t\t\t$el.result.slideDown();\r\n\t\t}\r\n\t\telse {\r\n\t\t\t$el.result_loading.hide();\r\n\t\t\t$el.result_table.show();\r\n\t\t\tslided = true;\r\n\t\t}\r\n\t}\r\n\r\n\tconst generateResult = ({ mfd, highlight = [], expand = true }) => {\r\n\t\tlet collapsed = [],\r\n\t\t\tgetProps = expand ?\r\n\t\t\t\t(lv, { expand = true, show = true }) => (lv < 3 ? `class=\"lv-${lv} toggle${expand ? ' toggle-expanded' : ''}\"${show ? '' : ' style=\"display:none\"'}` : `class=\"lv-3\"${show ? '' : ' style=\"display:none\"'}`) :\r\n\t\t\t\tlv => (lv ? (lv < 3 ? `class=\"lv-${lv} toggle\" style=\"display: none\"` : 'class=\"lv-3\" style=\"display: none\"') : `class=\"lv-0 toggle\"`),\r\n\t\t\thtml = mfd.map(a => /*html*/`\r\n\t\t\t\t<tr ${getProps(({ 0: 0, 2: 1, 4: 2, 7: 3 })[a.parent_id.length], { expand: a.expand, show: a.show })} data-id=\"${a.parent_id + a.id}\" data-parent-id=\"${a.parent_id}\">\r\n\t\t\t\t\t<td>${a.parent_id}<b>${a.id}</b></td>\r\n\t\t\t\t\t<td>${a.name}</td>\r\n\t\t\t\t</tr>\r\n\t\t\t`).join('');\r\n\t\t$el.result_table_body.html(html);\r\n\t\thighlight.forEach(a => { $el.result_table_body.mark(a); });\r\n\t\tloading(false);\r\n\t}\r\n\r\n\t{\r\n\t\t$('#setting-btn').click(function () {\r\n\r\n\t\t\tdbg('Setting button clicked!');\r\n\r\n\t\t\t// TODO: Open setting popup\r\n\r\n\r\n\r\n\t\t});\r\n\r\n\t\tconst updateSetting = (newSetting = false) => {\r\n\t\t\tif (newSetting) {\r\n\r\n\t\t\t\t// TODO: Update setting\r\n\r\n\r\n\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tsetting = {\r\n\t\t\t\t\tlevel: [0, 1, 2, 3],\r\n\t\t\t\t\tprov: null,\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n});\r\n"]}